<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Help you transform into an Android platform framework with AOP architecture"><meta name=author content=FlyJingFish><link href=https://flyjingfish.github.io/AndroidAOP/getting_started/ rel=canonical><link rel=prev href=..><link href=../android_aop_extra/ rel=next><link rel=icon href=../assets/web_logo.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.18"><title>Getting Started - AndroidAOP</title><link rel=stylesheet href=../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../css/site.css><link rel=stylesheet href=../css/logo_anim.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#version-restrictions class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=AndroidAOP class="md-header__button md-logo" aria-label=AndroidAOP data-md-component=logo> <img src=../assets/web_logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AndroidAOP </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Getting Started </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=indigo aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__option> <div class=md-select> <button class="md-header__button md-icon" aria-label="Select language"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a href=.. hreflang=en class=md-select__link> English </a> </li> <li class=md-select__item> <a href=../zh/ hreflang=zh class=md-select__link> 中文 </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/FlyJingFish/AndroidAOP title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> FlyJingFish/AndroidAOP </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class="md-tabs__item md-tabs__item--active"> <a href=.. class=md-tabs__link> English </a> </li> <li class=md-tabs__item> <a href=../zh/ class=md-tabs__link> 中文 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=AndroidAOP class="md-nav__button md-logo" aria-label=AndroidAOP data-md-component=logo> <img src=../assets/web_logo.png alt=logo> </a> AndroidAOP </label> <div class=md-nav__source> <a href=https://github.com/FlyJingFish/AndroidAOP title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> FlyJingFish/AndroidAOP </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1 checked> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex> <span class=md-ellipsis> English </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=true> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> English </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Getting Started </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#version-restrictions class=md-nav__link> <span class=md-ellipsis> Version restrictions </span> </a> </li> <li class=md-nav__item> <a href=#steps-for-usage class=md-nav__link> <span class=md-ellipsis> Steps for usage </span> </a> <nav class=md-nav aria-label="Steps for usage"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-introduce-the-plug-in-choose-one-of-the-two-methods-below-required class=md-nav__link> <span class=md-ellipsis> 1. Introduce the plug-in, choose one of the two methods below (required) </span> </a> <nav class=md-nav aria-label="1. Introduce the plug-in, choose one of the two methods below (required)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#method-1-apply-method class=md-nav__link> <span class=md-ellipsis> Method 1: apply method </span> </a> </li> <li class=md-nav__item> <a href=#method-2-plugins-method class=md-nav__link> <span class=md-ellipsis> Method 2: plugins method </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-if-you-need-to-customize-aspects-and-the-code-is-kotlin-optional class=md-nav__link> <span class=md-ellipsis> 2. If you need to customize aspects, and the code is Kotlin (optional) </span> </a> </li> <li class=md-nav__item> <a href=#3-introduce-dependent-libraries-required class=md-nav__link> <span class=md-ellipsis> 3. Introduce dependent libraries (required) </span> </a> </li> <li class=md-nav__item> <a href=#4-add-the-androidaopconfig-configuration-item-in-apps-buildgradle-this-step-is-an-optional-configuration-item class=md-nav__link> <span class=md-ellipsis> 4. Add the androidAopConfig configuration item in app’s build.gradle (this step is an optional configuration item) </span> </a> </li> <li class=md-nav__item> <a href=#5-you-can-set-the-packaging-method-during-development-this-step-is-an-optional-configuration-item-it-is-recommended-to-configure-this-item-to-speed-up-development class=md-nav__link> <span class=md-ellipsis> 5. You can set the packaging method during development (this step is an optional configuration item, it is recommended to configure this item to speed up development) </span> </a> <nav class=md-nav aria-label="5. You can set the packaging method during development (this step is an optional configuration item, it is recommended to configure this item to speed up development)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#method-1-fastdex-mode class=md-nav__link> <span class=md-ellipsis> Method 1 (fastDex mode) </span> </a> </li> <li class=md-nav__item> <a href=#method-2-debugmode class=md-nav__link> <span class=md-ellipsis> Method 2 (debugMode) </span> </a> </li> <li class=md-nav__item> <a href=#other-configurations-optional-you-can-configure-this-if-you-want-to-be-the-best class=md-nav__link> <span class=md-ellipsis> Other configurations (optional, you can configure this if you want to be the best) </span> </a> </li> <li class=md-nav__item> <a href=#cleankeepaopcache class=md-nav__link> <span class=md-ellipsis> CleanKeepAopCache </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#this-library-has-some-built-in-functional-annotations-for-you-to-use-directly class=md-nav__link> <span class=md-ellipsis> This library has some built-in functional annotations for you to use directly. </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#custom-aspects class=md-nav__link> <span class=md-ellipsis> Custom Aspects </span> </a> <nav class=md-nav aria-label="Custom Aspects"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#androidaoppointcut class=md-nav__link> <span class=md-ellipsis> @AndroidAopPointCut </span> </a> </li> <li class=md-nav__item> <a href=#androidaopmatchclassmethod class=md-nav__link> <span class=md-ellipsis> @AndroidAopMatchClassMethod </span> </a> </li> <li class=md-nav__item> <a href=#androidaopreplaceclass class=md-nav__link> <span class=md-ellipsis> @AndroidAopReplaceClass </span> </a> </li> <li class=md-nav__item> <a href=#androidaopmodifyextendsclass class=md-nav__link> <span class=md-ellipsis> @AndroidAopModifyExtendsClass </span> </a> </li> <li class=md-nav__item> <a href=#androidaopcollectmethod class=md-nav__link> <span class=md-ellipsis> @AndroidAopCollectMethod </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../android_aop_extra/ class=md-nav__link> <span class=md-ellipsis> Extension Library </span> </a> </li> <li class=md-nav__item> <a href=../AndroidAopPointCut/ class=md-nav__link> <span class=md-ellipsis> @AndroidAopPointCut </span> </a> </li> <li class=md-nav__item> <a href=../AndroidAopMatchClassMethod/ class=md-nav__link> <span class=md-ellipsis> @AndroidAopMatchClassMethod </span> </a> </li> <li class=md-nav__item> <a href=../AndroidAopReplaceClass/ class=md-nav__link> <span class=md-ellipsis> @AndroidAopReplaceClass </span> </a> </li> <li class=md-nav__item> <a href=../AndroidAopModifyExtendsClass/ class=md-nav__link> <span class=md-ellipsis> @AndroidAopModifyExtendsClass </span> </a> </li> <li class=md-nav__item> <a href=../AndroidAopCollectMethod/ class=md-nav__link> <span class=md-ellipsis> @AndroidAopCollectMethod </span> </a> </li> <li class=md-nav__item> <a href=../AOP_Helper/ class=md-nav__link> <span class=md-ellipsis> AOP-Code Helper </span> </a> </li> <li class=md-nav__item> <a href=../ProceedJoinPoint/ class=md-nav__link> <span class=md-ellipsis> ProceedJoinPoint </span> </a> </li> <li class=md-nav__item> <a href=../ProceedReturn/ class=md-nav__link> <span class=md-ellipsis> ProceedReturn </span> </a> </li> <li class=md-nav__item> <a href=../Pointcut_return/ class=md-nav__link> <span class=md-ellipsis> Pointcut method return value </span> </a> </li> <li class=md-nav__item> <a href=../Suspend_cut/ class=md-nav__link> <span class=md-ellipsis> Suspend pointcut function </span> </a> </li> <li class=md-nav__item> <a href=../About_obfuscation/ class=md-nav__link> <span class=md-ellipsis> About obfuscation </span> </a> </li> <li class=md-nav__item> <a href=../Implications/ class=md-nav__link> <span class=md-ellipsis> Implications </span> </a> </li> <li class=md-nav__item> <a href=../AspectJ_Migration_Guide/ class=md-nav__link> <span class=md-ellipsis> AspectJ Migration Guide </span> </a> </li> <li class=md-nav__item> <a href=../FAQ/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../give_list/ class=md-nav__link> <span class=md-ellipsis> Tips </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> 中文 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> 中文 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../zh/ class=md-nav__link> <span class=md-ellipsis> 概述 </span> </a> </li> <li class=md-nav__item> <a href=../zh/getting_started/ class=md-nav__link> <span class=md-ellipsis> 入门 </span> </a> </li> <li class=md-nav__item> <a href=../zh/android_aop_extra/ class=md-nav__link> <span class=md-ellipsis> 扩展库 </span> </a> </li> <li class=md-nav__item> <a href=../zh/AndroidAopPointCut/ class=md-nav__link> <span class=md-ellipsis> @AndroidAopPointCut </span> </a> </li> <li class=md-nav__item> <a href=../zh/AndroidAopMatchClassMethod/ class=md-nav__link> <span class=md-ellipsis> @AndroidAopMatchClassMethod </span> </a> </li> <li class=md-nav__item> <a href=../zh/AndroidAopReplaceClass/ class=md-nav__link> <span class=md-ellipsis> @AndroidAopReplaceClass </span> </a> </li> <li class=md-nav__item> <a href=../zh/AndroidAopModifyExtendsClass/ class=md-nav__link> <span class=md-ellipsis> @AndroidAopModifyExtendsClass </span> </a> </li> <li class=md-nav__item> <a href=../zh/AndroidAopCollectMethod/ class=md-nav__link> <span class=md-ellipsis> @AndroidAopCollectMethod </span> </a> </li> <li class=md-nav__item> <a href=../zh/AOP_Helper/ class=md-nav__link> <span class=md-ellipsis> AOP 代码生成助手 </span> </a> </li> <li class=md-nav__item> <a href=../zh/ProceedJoinPoint/ class=md-nav__link> <span class=md-ellipsis> ProceedJoinPoint </span> </a> </li> <li class=md-nav__item> <a href=../zh/ProceedReturn/ class=md-nav__link> <span class=md-ellipsis> ProceedReturn </span> </a> </li> <li class=md-nav__item> <a href=../zh/Pointcut_return/ class=md-nav__link> <span class=md-ellipsis> 切点方法返回值 </span> </a> </li> <li class=md-nav__item> <a href=../zh/Suspend_cut/ class=md-nav__link> <span class=md-ellipsis> Suspend 切点函数 </span> </a> </li> <li class=md-nav__item> <a href=../zh/About_obfuscation/ class=md-nav__link> <span class=md-ellipsis> 关于混淆 </span> </a> </li> <li class=md-nav__item> <a href=../zh/Implications/ class=md-nav__link> <span class=md-ellipsis> 切面启示 </span> </a> </li> <li class=md-nav__item> <a href=../zh/AspectJ_Migration_Guide/ class=md-nav__link> <span class=md-ellipsis> AspectJ 迁移指南 </span> </a> </li> <li class=md-nav__item> <a href=../zh/FAQ/ class=md-nav__link> <span class=md-ellipsis> 常见问题 </span> </a> </li> <li class=md-nav__item> <a href=../zh/give_list/ class=md-nav__link> <span class=md-ellipsis> 打赏本库 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#version-restrictions class=md-nav__link> <span class=md-ellipsis> Version restrictions </span> </a> </li> <li class=md-nav__item> <a href=#steps-for-usage class=md-nav__link> <span class=md-ellipsis> Steps for usage </span> </a> <nav class=md-nav aria-label="Steps for usage"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-introduce-the-plug-in-choose-one-of-the-two-methods-below-required class=md-nav__link> <span class=md-ellipsis> 1. Introduce the plug-in, choose one of the two methods below (required) </span> </a> <nav class=md-nav aria-label="1. Introduce the plug-in, choose one of the two methods below (required)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#method-1-apply-method class=md-nav__link> <span class=md-ellipsis> Method 1: apply method </span> </a> </li> <li class=md-nav__item> <a href=#method-2-plugins-method class=md-nav__link> <span class=md-ellipsis> Method 2: plugins method </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-if-you-need-to-customize-aspects-and-the-code-is-kotlin-optional class=md-nav__link> <span class=md-ellipsis> 2. If you need to customize aspects, and the code is Kotlin (optional) </span> </a> </li> <li class=md-nav__item> <a href=#3-introduce-dependent-libraries-required class=md-nav__link> <span class=md-ellipsis> 3. Introduce dependent libraries (required) </span> </a> </li> <li class=md-nav__item> <a href=#4-add-the-androidaopconfig-configuration-item-in-apps-buildgradle-this-step-is-an-optional-configuration-item class=md-nav__link> <span class=md-ellipsis> 4. Add the androidAopConfig configuration item in app’s build.gradle (this step is an optional configuration item) </span> </a> </li> <li class=md-nav__item> <a href=#5-you-can-set-the-packaging-method-during-development-this-step-is-an-optional-configuration-item-it-is-recommended-to-configure-this-item-to-speed-up-development class=md-nav__link> <span class=md-ellipsis> 5. You can set the packaging method during development (this step is an optional configuration item, it is recommended to configure this item to speed up development) </span> </a> <nav class=md-nav aria-label="5. You can set the packaging method during development (this step is an optional configuration item, it is recommended to configure this item to speed up development)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#method-1-fastdex-mode class=md-nav__link> <span class=md-ellipsis> Method 1 (fastDex mode) </span> </a> </li> <li class=md-nav__item> <a href=#method-2-debugmode class=md-nav__link> <span class=md-ellipsis> Method 2 (debugMode) </span> </a> </li> <li class=md-nav__item> <a href=#other-configurations-optional-you-can-configure-this-if-you-want-to-be-the-best class=md-nav__link> <span class=md-ellipsis> Other configurations (optional, you can configure this if you want to be the best) </span> </a> </li> <li class=md-nav__item> <a href=#cleankeepaopcache class=md-nav__link> <span class=md-ellipsis> CleanKeepAopCache </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#this-library-has-some-built-in-functional-annotations-for-you-to-use-directly class=md-nav__link> <span class=md-ellipsis> This library has some built-in functional annotations for you to use directly. </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#custom-aspects class=md-nav__link> <span class=md-ellipsis> Custom Aspects </span> </a> <nav class=md-nav aria-label="Custom Aspects"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#androidaoppointcut class=md-nav__link> <span class=md-ellipsis> @AndroidAopPointCut </span> </a> </li> <li class=md-nav__item> <a href=#androidaopmatchclassmethod class=md-nav__link> <span class=md-ellipsis> @AndroidAopMatchClassMethod </span> </a> </li> <li class=md-nav__item> <a href=#androidaopreplaceclass class=md-nav__link> <span class=md-ellipsis> @AndroidAopReplaceClass </span> </a> </li> <li class=md-nav__item> <a href=#androidaopmodifyextendsclass class=md-nav__link> <span class=md-ellipsis> @AndroidAopModifyExtendsClass </span> </a> </li> <li class=md-nav__item> <a href=#androidaopcollectmethod class=md-nav__link> <span class=md-ellipsis> @AndroidAopCollectMethod </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Getting Started</h1> <h2 id=version-restrictions>Version restrictions<a class=headerlink href=#version-restrictions title="Permanent link">&para;</a></h2> <p>Minimum Gradle version: 7.6👇 (supports 8.0 and above)</p> <p><img src=../screenshot/gradle_version.png alt=show></p> <p>Minimum SDK version: minSdkVersion &gt;= 21</p> <h2 id=steps-for-usage>Steps for usage<a class=headerlink href=#steps-for-usage title="Permanent link">&para;</a></h2> <p><strong>Can you give the project a Star before starting? Thank you very much, your support is my only motivation. Stars and Issues are welcome!</strong></p> <p style=color:red;>The repository address of this library is in Maven central. If you cannot get the dependent package, please put the mirror address such as Alibaba after mavenCentral()</p> <h3 id=1-introduce-the-plug-in-choose-one-of-the-two-methods-below-required>1. Introduce the plug-in, choose one of the two methods below (required)<a class=headerlink href=#1-introduce-the-plug-in-choose-one-of-the-two-methods-below-required title="Permanent link">&para;</a></h3> <h4 id=method-1-apply-method>Method 1: <code>apply</code> method<a class=headerlink href=#method-1-apply-method title="Permanent link">&para;</a></h4> <p><img src=/AndroidAOP/svg/one.svg#only-light align=center> <img src=/AndroidAOP/svg/one_dark.svg#only-dark align=center> Depend on the plug-in in <code>build.gradle</code> in the <strong>project root directory</strong></p> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=method-1-apply-method-groovy name=__tabbed_1 type=radio><input id=method-1-apply-method-kotlin name=__tabbed_1 type=radio><div class=tabbed-labels><label for=method-1-apply-method-groovy>Groovy</label><label for=method-1-apply-method-kotlin>Kotlin</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li> <p>Using the <strong>plugins DSL</strong>: <div class="language-groovy highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>plugins</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>  </span><span class=c1>//👇Required item (1)👈 apply is set to true to automatically apply debugMode to all modules, If false, follow step 5 below to configure debugMode in manual mode.</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>  </span><span class=n>id</span><span class=w> </span><span class=s2>&quot;io.github.flyjingfish.androidaop&quot;</span><span class=w> </span><span class=n>version</span><span class=w> </span><span class=s2>&quot;2.7.1&quot;</span><span class=w> </span><span class=n>apply</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=o>}</span>
</span></code></pre></div></p> <ol> <li><img alt=🙋‍♂️ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f64b-200d-2642-fe0f.svg title=:man_raising_hand:> If you have the <code>com.google.dagger.hilt.android</code> plugin in your project, put this plugin before it.</li> </ol> </li> <li> <p>Using <strong>legacy plugin application</strong>:</p> <div class="language-groovy highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=n>buildscript</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>     </span><span class=n>dependencies</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>         </span><span class=c1>//👇equired items (1)👈</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>         </span><span class=n>classpath</span><span class=w> </span><span class=s2>&quot;io.github.flyjingfish:androidaop-plugin:2.7.1&quot;</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>     </span><span class=o>}</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=o>}</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=c1>//👇Add this sentence to automatically apply debugMode to all modules. If not, follow step 5 below to configure debugMode in manual mode.</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=n>apply</span><span class=w> </span><span class=nl>plugin:</span><span class=w> </span><span class=s2>&quot;android.aop&quot;</span>
</span></code></pre></div> <ol> <li><img alt=🙋‍♂️ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f64b-200d-2642-fe0f.svg title=:man_raising_hand:> If you have the <code>com.google.dagger:hilt-android-gradle-plugin</code> plugin in your project, put this plugin before it.</li> </ol> </li> </ul> </div> <div class=tabbed-block> <ul> <li> <p>Using the <strong>plugins DSL</strong>: <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=n>plugins</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>  </span><span class=c1>//👇Required item (1)👈 apply is set to true to automatically apply debugMode to all modules, If false, follow step 5 below to configure debugMode in manual mode.</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>  </span><span class=n>id</span><span class=p>(</span><span class=s>&quot;io.github.flyjingfish.androidaop&quot;</span><span class=p>)</span><span class=w> </span><span class=n>version</span><span class=w> </span><span class=s>&quot;2.7.1&quot;</span><span class=w> </span><span class=n>apply</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=p>}</span>
</span></code></pre></div></p> <ol> <li><img alt=🙋‍♂️ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f64b-200d-2642-fe0f.svg title=:man_raising_hand:> If you have the <code>com.google.dagger.hilt.android</code> plugin in your project, put this plugin before it.</li> </ol> </li> <li> <p>Using <strong>legacy plugin application</strong>:</p> <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=n>buildscript</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>     </span><span class=n>dependencies</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>         </span><span class=c1>//👇Required items (1)👈</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>         </span><span class=n>classpath</span><span class=p>(</span><span class=s>&quot;io.github.flyjingfish:androidaop-plugin:2.7.1&quot;</span><span class=p>)</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>     </span><span class=p>}</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=p>}</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=c1>//👇Add this sentence to automatically apply debugMode to all modules. If not, follow step 5 below to configure debugMode in manual mode.</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=n>apply</span><span class=p>(</span><span class=n>plugin</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;android.aop&quot;</span><span class=p>)</span>
</span></code></pre></div> <ol> <li><img alt=🙋‍♂️ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f64b-200d-2642-fe0f.svg title=:man_raising_hand:> If you have the <code>com.google.dagger:hilt-android-gradle-plugin</code> plugin in your project, put this plugin before it.</li> </ol> </li> </ul> </div> </div> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p><strong>If you use the hilt plugin in your project, pay attention to the order of importing plugins mentioned in the article (click the "+" above to see more information)</strong></p> </div> <p><img src=/AndroidAOP/svg/two.svg#only-light align=center> <img src=/AndroidAOP/svg/two_dark.svg#only-dark align=center> Add in <code>build.gradle</code> of <strong>com.android.application（com.android.dynamic-feature）</strong></p> <div class="tabbed-set tabbed-alternate" data-tabs=2:2><input checked=checked id=method-1-apply-method-groovy_1 name=__tabbed_2 type=radio><input id=method-1-apply-method-kotlin_1 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=method-1-apply-method-groovy_1>Groovy</label><label for=method-1-apply-method-kotlin_1>Kotlin</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li> <p>Using the <strong>plugins DSL</strong>:</p> <div class="language-groovy highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1>//Required items 👇</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=n>plugins</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span><span class=o>...</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=s1>&#39;android.aop&#39;</span><span class=c1>//It is best to put it on the last line</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=o>}</span>
</span></code></pre></div> </li> <li> <p>Using <strong>legacy plugin application</strong>:</p> <div class="language-groovy highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1>//Required items 👇</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=n>apply</span><span class=w> </span><span class=nl>plugin:</span><span class=w> </span><span class=s1>&#39;android.aop&#39;</span><span class=w> </span><span class=c1>//It&#39;s best to put it on the last line</span>
</span></code></pre></div> </li> </ul> </div> <div class=tabbed-block> <ul> <li> <p>Using the <strong>plugins DSL</strong>:</p> <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1>//Required items 👇</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=n>plugins</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span><span class=p>...</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>    </span><span class=n>id</span><span class=p>(</span><span class=s>&quot;android.aop&quot;</span><span class=p>)</span><span class=c1>//It is best to put it on the last line</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=p>}</span>
</span></code></pre></div> </li> <li> <p>Using <strong>legacy plugin application</strong>:</p> <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1>//Required items 👇</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=n>apply</span><span class=p>(</span><span class=n>plugin</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;android.aop&quot;</span><span class=p>)</span><span class=w> </span><span class=c1>//It&#39;s best to put it on the last line</span>
</span></code></pre></div> </li> </ul> </div> </div> </div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p><strong><img alt=⚠ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg title=:warning:><img alt=⚠ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg title=:warning:><img alt=⚠ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg title=:warning:><code>id 'android.aop'</code> should be placed on the last line, especially after <code>id 'com.android.application'</code>, <code>id 'com.android.library'</code> or <code>id 'com.android.dynamic-feature'</code>.</strong></p> </div> <h4 id=method-2-plugins-method><del>Method 2: <code>plugins</code> method</del><a class=headerlink href=#method-2-plugins-method title="Permanent link">&para;</a></h4> <ul> <li>Add directly to <code>build.gradle</code> of <strong>com.android.application（com.android.dynamic-feature）</strong></li> </ul> <div class="tabbed-set tabbed-alternate" data-tabs=3:2><input checked=checked id=method-2-plugins-method-groovy name=__tabbed_3 type=radio><input id=method-2-plugins-method-kotlin name=__tabbed_3 type=radio><div class=tabbed-labels><label for=method-2-plugins-method-groovy>Groovy</label><label for=method-2-plugins-method-kotlin>Kotlin</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-groovy highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1>//Required items 👇</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=n>plugins</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>   </span><span class=o>...</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>   </span><span class=n>id</span><span class=w> </span><span class=s2>&quot;io.github.flyjingfish.androidaop&quot;</span><span class=w> </span><span class=n>version</span><span class=w> </span><span class=s2>&quot;2.7.1&quot;</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=o>}</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1>//Required items 👇</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=n>plugins</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>   </span><span class=p>...</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>   </span><span class=n>id</span><span class=p>(</span><span class=s>&quot;io.github.flyjingfish.androidaop&quot;</span><span class=p>)</span><span class=w> </span><span class=n>version</span><span class=w> </span><span class=s>&quot;2.7.1&quot;</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=p>}</span>
</span></code></pre></div> </div> </div> </div> <h3 id=2-if-you-need-to-customize-aspects-and-the-code-is-kotlin-optional>2. If you need to customize aspects, and the code is <code>Kotlin</code> (optional)<a class=headerlink href=#2-if-you-need-to-customize-aspects-and-the-code-is-kotlin-optional title="Permanent link">&para;</a></h3> <ul> <li>Depend on the plug-in in <code>build.gradle</code> in the <strong>project root directory</strong></li> </ul> <div class="tabbed-set tabbed-alternate" data-tabs=4:2><input checked=checked id=2-if-you-need-to-customize-aspects-and-the-code-is-kotlin-optional-groovy name=__tabbed_4 type=radio><input id=2-if-you-need-to-customize-aspects-and-the-code-is-kotlin-optional-kotlin name=__tabbed_4 type=radio><div class=tabbed-labels><label for=2-if-you-need-to-customize-aspects-and-the-code-is-kotlin-optional-groovy>Groovy</label><label for=2-if-you-need-to-customize-aspects-and-the-code-is-kotlin-optional-kotlin>Kotlin</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-groovy highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=n>plugins</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>    </span><span class=c1>//Optional 👇, if you need to customize aspects and use the android-aop-ksp library, you need to configure it. The version number below is determined according to the Kotlin version of your project</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=s1>&#39;com.google.devtools.ksp&#39;</span><span class=w> </span><span class=n>version</span><span class=w> </span><span class=s1>&#39;1.8.0-1.0.9&#39;</span><span class=w> </span><span class=n>apply</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=o>}</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=n>plugins</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>    </span><span class=c1>//Optional 👇, if you need to customize aspects and use the android-aop-ksp library, you need to configure it. The version number below is determined according to the Kotlin version of your project</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>    </span><span class=n>id</span><span class=p>(</span><span class=s>&quot;com.google.devtools.ksp&quot;</span><span class=p>)</span><span class=w> </span><span class=n>version</span><span class=w> </span><span class=s>&quot;1.8.0-1.0.9&quot;</span><span class=w> </span><span class=n>apply</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=p>}</span>
</span></code></pre></div> </div> </div> </div> <p><a href=https://github.com/google/ksp/releases>List of matching version numbers for Kotlin and KSP Github</a></p> <h3 id=3-introduce-dependent-libraries-required>3. Introduce dependent libraries (required)<a class=headerlink href=#3-introduce-dependent-libraries-required title="Permanent link">&para;</a></h3> <div class="tabbed-set tabbed-alternate" data-tabs=5:2><input checked=checked id=3-introduce-dependent-libraries-required-groovy name=__tabbed_5 type=radio><input id=3-introduce-dependent-libraries-required-kotlin name=__tabbed_5 type=radio><div class=tabbed-labels><label for=3-introduce-dependent-libraries-required-groovy>Groovy</label><label for=3-introduce-dependent-libraries-required-kotlin>Kotlin</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-groovy highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=n>plugins</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>     </span><span class=c1>//Optional 👇, if you need to customize aspects and use the android-aop-ksp library, you need to configure it</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>     </span><span class=n>id</span><span class=w> </span><span class=s1>&#39;com.google.devtools.ksp&#39;</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=o>}</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=n>dependencies</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=w>     </span><span class=c1>//👇Required items </span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=w>     </span><span class=n>implementation</span><span class=w> </span><span class=s2>&quot;io.github.flyjingfish:androidaop-core:2.7.1&quot;</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=w>     </span><span class=c1>//👇Optional (1)👈 This package provides some common annotation aspects</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=w>     </span><span class=n>implementation</span><span class=w> </span><span class=s2>&quot;io.github.flyjingfish:androidaop-extra:2.7.1&quot;</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a><span class=w>     </span><span class=c1>//👇Required item  If you already have this item in your project, you don’t need to add it.</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a><span class=w>     </span><span class=n>implementation</span><span class=w> </span><span class=s2>&quot;androidx.appcompat:appcompat:1.3.0&quot;</span><span class=w> </span><span class=c1>// At least in 1.3.0 and above</span>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a><span class=w>     </span><span class=c1>//👇Choose one (2)👈Click + to view detailed description, ⚠️supports aspects written in Java and Kotlin code</span>
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a><span class=w>     </span><span class=n>ksp</span><span class=w> </span><span class=s2>&quot;io.github.flyjingfish:androidaop-apt:2.7.1&quot;</span>
</span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a><span class=w>     </span><span class=c1>//👇Choose one (3)👈Click + to view detailed description, ⚠️only applies to aspects written in Java code</span>
</span><span id=__span-12-18><a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a><span class=w>     </span><span class=n>annotationProcessor</span><span class=w> </span><span class=s2>&quot;io.github.flyjingfish:androidaop-apt:2.7.1&quot;</span>
</span><span id=__span-12-19><a id=__codelineno-12-19 name=__codelineno-12-19 href=#__codelineno-12-19></a><span class=w>     </span><span class=c1>//⚠️Choose one of the above ksp and annotationProcessor</span>
</span><span id=__span-12-20><a id=__codelineno-12-20 name=__codelineno-12-20 href=#__codelineno-12-20></a><span class=w>     </span><span class=c1>//If you only use the functions in android-aop-extra, you don&#39;t need to select these two options</span>
</span><span id=__span-12-21><a id=__codelineno-12-21 name=__codelineno-12-21 href=#__codelineno-12-21></a><span class=o>}</span>
</span></code></pre></div> <ol> <li><img alt=🙋‍♂️ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f64b-200d-2642-fe0f.svg title=:man_raising_hand:> This library has built-in annotations for some functions defined using <a href=/AndroidAOP/AndroidAopPointCut/ >@AndroidAopPointCut</a></li> <li><img alt=🙋‍♂️ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f64b-200d-2642-fe0f.svg title=:man_raising_hand:> When you use the five custom aspect annotations <a href=#custom-aspects>described here</a>, it means you must use <code>androidaop-apt</code></li> <li><img alt=🙋‍♂️ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f64b-200d-2642-fe0f.svg title=:man_raising_hand:> When you use the five custom aspect annotations <a href=#custom-aspects>described here</a>, it means you must use <code>androidaop-apt</code></li> </ol> </div> <div class=tabbed-block> <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=n>plugins</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>     </span><span class=c1>//Optional 👇, if you need to customize aspects and use the android-aop-ksp library, you need to configure it</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>     </span><span class=n>id</span><span class=p>(</span><span class=s>&quot;com.google.devtools.ksp&quot;</span><span class=p>)</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=p>}</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=n>dependencies</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=w>     </span><span class=c1>//👇Required items </span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=w>     </span><span class=n>implementation</span><span class=p>(</span><span class=s>&quot;io.github.flyjingfish:androidaop-core:2.7.1&quot;</span><span class=p>)</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=w>     </span><span class=c1>//👇Optional (1)👈 This package provides some common annotation aspects</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=w>     </span><span class=n>implementation</span><span class=p>(</span><span class=s>&quot;io.github.flyjingfish:androidaop-extra:2.7.1&quot;</span><span class=p>)</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a><span class=w>     </span><span class=c1>//👇Required item  If you already have this item in your project, you don’t need to add it.</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a><span class=w>     </span><span class=n>implementation</span><span class=p>(</span><span class=s>&quot;androidx.appcompat:appcompat:1.3.0&quot;</span><span class=p>)</span><span class=w> </span><span class=c1>// At least in 1.3.0 and above</span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a>
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a><span class=w>     </span><span class=c1>//👇Choose one (2)👈Click + to view detailed description, ⚠️supports aspects written in Java and Kotlin code</span>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a><span class=w>     </span><span class=n>ksp</span><span class=p>(</span><span class=s>&quot;io.github.flyjingfish:androidaop-apt:2.7.1&quot;</span><span class=p>)</span>
</span><span id=__span-13-17><a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a><span class=w>     </span><span class=c1>//👇Choose one (3)👈Click + to view detailed description, ⚠️only applies to aspects written in Java code</span>
</span><span id=__span-13-18><a id=__codelineno-13-18 name=__codelineno-13-18 href=#__codelineno-13-18></a><span class=w>     </span><span class=n>annotationProcessor</span><span class=p>(</span><span class=s>&quot;io.github.flyjingfish:androidaop-apt:2.7.1&quot;</span><span class=p>)</span>
</span><span id=__span-13-19><a id=__codelineno-13-19 name=__codelineno-13-19 href=#__codelineno-13-19></a><span class=w>     </span><span class=c1>//⚠️Choose one of the above ksp and annotationProcessor</span>
</span><span id=__span-13-20><a id=__codelineno-13-20 name=__codelineno-13-20 href=#__codelineno-13-20></a><span class=w>     </span><span class=c1>//If you only use the functions in android-aop-extra, you don&#39;t need to select these two options</span>
</span><span id=__span-13-21><a id=__codelineno-13-21 name=__codelineno-13-21 href=#__codelineno-13-21></a><span class=p>}</span>
</span></code></pre></div> <ol> <li><img alt=🙋‍♂️ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f64b-200d-2642-fe0f.svg title=:man_raising_hand:> This library has built-in annotations for some functions defined using <a href=/AndroidAOP/AndroidAopPointCut/ >@AndroidAopPointCut</a></li> <li><img alt=🙋‍♂️ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f64b-200d-2642-fe0f.svg title=:man_raising_hand:> When you use the five custom aspect annotations <a href=#custom-aspects>described here</a>, it means you must use <code>androidaop-apt</code></li> <li><img alt=🙋‍♂️ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f64b-200d-2642-fe0f.svg title=:man_raising_hand:> When you use the five custom aspect annotations <a href=#custom-aspects>described here</a>, it means you must use <code>androidaop-apt</code></li> </ol> </div> </div> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Tip: ksp or annotationProcessor can only scan the current module. Custom aspect codes are added to the module where they are located. <strong>But custom aspect codes are globally effective</strong>; required dependencies can be added only to public modules through the API.</p> </div> <h3 id=4-add-the-androidaopconfig-configuration-item-in-apps-buildgradle-this-step-is-an-optional-configuration-item>4. Add the androidAopConfig configuration item in app’s build.gradle (this step is an optional configuration item)<a class=headerlink href=#4-add-the-androidaopconfig-configuration-item-in-apps-buildgradle-this-step-is-an-optional-configuration-item title="Permanent link">&para;</a></h3> <ul> <li>Related development configurations</li> </ul> <div class="tabbed-set tabbed-alternate" data-tabs=6:2><input checked=checked id=4-add-the-androidaopconfig-configuration-item-in-apps-buildgradle-this-step-is-an-optional-configuration-item-groovy name=__tabbed_6 type=radio><input id=4-add-the-androidaopconfig-configuration-item-in-apps-buildgradle-this-step-is-an-optional-configuration-item-kotlin name=__tabbed_6 type=radio><div class=tabbed-labels><label for=4-add-the-androidaopconfig-configuration-item-in-apps-buildgradle-this-step-is-an-optional-configuration-item-groovy>Groovy</label><label for=4-add-the-androidaopconfig-configuration-item-in-apps-buildgradle-this-step-is-an-optional-configuration-item-kotlin>Kotlin</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-groovy highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=n>plugins</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>     </span><span class=o>...</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>     </span><span class=n>id</span><span class=w> </span><span class=s1>&#39;android.aop&#39;</span><span class=c1>//It is best to put it on the last line</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=o>}</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=n>androidAopConfig</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>     </span><span class=c1>// enabled is false, the aspect no longer works, the default is not written as true</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>     </span><span class=n>enabled</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>     </span><span class=c1>// include does not set all scans by default. After setting, only the code of the set package name will be scanned.</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=w>     </span><span class=n>include</span><span class=w> </span><span class=s1>&#39;Package name of your project&#39;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;Package name of custom module&#39;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;Package name of custom module&#39;</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=w>     </span><span class=c1>// exclude is the package excluded during scanning</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=w>     </span><span class=c1>// Can exclude kotlin related and improve speed</span>
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a><span class=w>     </span><span class=n>exclude</span><span class=w> </span><span class=s1>&#39;kotlin.jvm&#39;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;kotlin.internal&#39;</span><span class=o>,</span><span class=s1>&#39;kotlinx.coroutines.internal&#39;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;kotlinx.coroutines.android&#39;</span>
</span><span id=__span-14-13><a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a><span class=w>     </span><span class=c1>// Exclude packaged entity names</span>
</span><span id=__span-14-14><a id=__codelineno-14-14 name=__codelineno-14-14 href=#__codelineno-14-14></a><span class=w>     </span><span class=n>excludePackaging</span><span class=w> </span><span class=s1>&#39;license/NOTICE&#39;</span><span class=w> </span><span class=o>,</span><span class=w> </span><span class=s1>&#39;license/LICENSE.dom-software.txt&#39;</span><span class=w> </span><span class=o>,</span><span class=w> </span><span class=s1>&#39;license/LICENSE&#39;</span>
</span><span id=__span-14-15><a id=__codelineno-14-15 name=__codelineno-14-15 href=#__codelineno-14-15></a>
</span><span id=__span-14-16><a id=__codelineno-14-16 name=__codelineno-14-16 href=#__codelineno-14-16></a><span class=w>     </span><span class=c1>// verifyLeafExtends Whether to turn on verification leaf inheritance, it is turned on by default. If type = MatchType.LEAF_EXTENDS of @AndroidAopMatchClassMethod is not set, it can be turned off.</span>
</span><span id=__span-14-17><a id=__codelineno-14-17 name=__codelineno-14-17 href=#__codelineno-14-17></a><span class=w>     </span><span class=n>verifyLeafExtends</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-14-18><a id=__codelineno-14-18 name=__codelineno-14-18 href=#__codelineno-14-18></a><span class=w>     </span><span class=c1>//Disabled by default. Enabled after Build or Packaging, a cut information file will be generated in app/build/tmp/ (cutInfo.json, cutInfo.html)</span>
</span><span id=__span-14-19><a id=__codelineno-14-19 name=__codelineno-14-19 href=#__codelineno-14-19></a><span class=w>     </span><span class=n>cutInfoJson</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-14-20><a id=__codelineno-14-20 name=__codelineno-14-20 href=#__codelineno-14-20></a><span class=o>}</span>
</span><span id=__span-14-21><a id=__codelineno-14-21 name=__codelineno-14-21 href=#__codelineno-14-21></a><span class=n>android</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-14-22><a id=__codelineno-14-22 name=__codelineno-14-22 href=#__codelineno-14-22></a><span class=w>     </span><span class=o>...</span>
</span><span id=__span-14-23><a id=__codelineno-14-23 name=__codelineno-14-23 href=#__codelineno-14-23></a><span class=o>}</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=n>plugins</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>     </span><span class=p>...</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>     </span><span class=n>id</span><span class=p>(</span><span class=s>&quot;android.aop&quot;</span><span class=p>)</span><span class=c1>//It is best to put it on the last line</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=p>}</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=n>androidAopConfig</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=w>     </span><span class=c1>// enabled is false, the aspect no longer works, the default is not written as true</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=w>     </span><span class=n>enabled</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=w>     </span><span class=c1>// include does not set all scans by default. After setting, only the code of the set package name will be scanned.</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=w>     </span><span class=n>include</span><span class=p>(</span><span class=s>&quot;Package name of your project&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Package name of custom module&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Package name of custom module&quot;</span><span class=p>)</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=w>     </span><span class=c1>// exclude is the package excluded during scanning</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a><span class=w>     </span><span class=c1>// Can exclude kotlin related and improve speed</span>
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a><span class=w>     </span><span class=n>exclude</span><span class=p>(</span><span class=s>&quot;kotlin.jvm&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;kotlin.internal&quot;</span><span class=p>,</span><span class=s>&quot;kotlinx.coroutines.internal&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;kotlinx.coroutines.android&quot;</span><span class=p>)</span>
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a><span class=w>     </span><span class=c1>// Exclude the entity name of the package</span>
</span><span id=__span-15-14><a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a><span class=w>     </span><span class=n>excludePackaging</span><span class=p>(</span><span class=s>&quot;license/NOTICE&quot;</span><span class=w> </span><span class=p>,</span><span class=w> </span><span class=s>&quot;license/LICENSE.dom-software.txt&quot;</span><span class=w> </span><span class=p>,</span><span class=w> </span><span class=s>&quot;license/LICENSE&quot;</span><span class=p>)</span>
</span><span id=__span-15-15><a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a>
</span><span id=__span-15-16><a id=__codelineno-15-16 name=__codelineno-15-16 href=#__codelineno-15-16></a><span class=w>     </span><span class=c1>// verifyLeafExtends Whether to turn on verification leaf inheritance, it is turned on by default. If type = MatchType.LEAF_EXTENDS of @AndroidAopMatchClassMethod is not set, it can be turned off.</span>
</span><span id=__span-15-17><a id=__codelineno-15-17 name=__codelineno-15-17 href=#__codelineno-15-17></a><span class=w>     </span><span class=n>verifyLeafExtends</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-15-18><a id=__codelineno-15-18 name=__codelineno-15-18 href=#__codelineno-15-18></a><span class=w>     </span><span class=c1>//Disabled by default. Enabled after Build or Packaging, a cut information file will be generated in app/build/tmp/ (cutInfo.json, cutInfo.html)</span>
</span><span id=__span-15-19><a id=__codelineno-15-19 name=__codelineno-15-19 href=#__codelineno-15-19></a><span class=w>     </span><span class=n>cutInfoJson</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-15-20><a id=__codelineno-15-20 name=__codelineno-15-20 href=#__codelineno-15-20></a><span class=p>}</span>
</span><span id=__span-15-21><a id=__codelineno-15-21 name=__codelineno-15-21 href=#__codelineno-15-21></a><span class=n>android</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-22><a id=__codelineno-15-22 name=__codelineno-15-22 href=#__codelineno-15-22></a><span class=w>     </span><span class=p>...</span>
</span><span id=__span-15-23><a id=__codelineno-15-23 name=__codelineno-15-23 href=#__codelineno-15-23></a><span class=p>}</span>
</span></code></pre></div> </div> </div> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <ol> <li>Include and exclude support precise setting to a class<br></li> <li>Reasonable use of include and exclude can improve compilation speed. It is recommended to use include to set the relevant package name of your project (including app and custom module)<br></li> <li>If <code>LEAF_EXTENDS</code> is not set for <code>@AndroidAopMatchClassMethod</code> and <code>@AndroidAopCollectMethod</code>, setting <code>verifyLeafExtends</code> to false can also speed up</li> </ol> </div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p><img alt=⚠ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg title=:warning:><img alt=⚠ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg title=:warning:><img alt=⚠ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg title=:warning:>After setting include and exclude, all aspects are only valid within the rules you set. Please remember your settings! In addition, since Android Studio may have cache after setting here, it is recommended to clean before continuing development</p> </div> <h3 id=5-you-can-set-the-packaging-method-during-development-this-step-is-an-optional-configuration-item-it-is-recommended-to-configure-this-item-to-speed-up-development>5. You can set the packaging method during development (this step is an optional configuration item, it is recommended to configure this item to speed up development)<a class=headerlink href=#5-you-can-set-the-packaging-method-during-development-this-step-is-an-optional-configuration-item-it-is-recommended-to-configure-this-item-to-speed-up-development title="Permanent link">&para;</a></h3> <h4 id=method-1-fastdex-mode><img alt=📌 class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f4cc.svg title=:pushpin:> Method 1 (fastDex mode)<a class=headerlink href=#method-1-fastdex-mode title="Permanent link">&para;</a></h4> <p>Add the following settings to <code>gradle.properties</code> in the <strong>root directory</strong> (optional)</p> <div class="language-properties highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=na>androidAop.fastDex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>true //Accelerate the dexBuilder phase (default false)</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=na>androidAop.fastDex.variantOnlyDebug</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>false //Only works in debug (default false)</span>
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>1、When <code>androidAop.fastDex</code> is set to true, the dexBuilder task will be optimized and accelerated by <strong>incremental compilation</strong>. Please note that this setting will only work when not in debugMode mode<br> 2、When <code>androidAop.fastDex.variantOnlyDebug</code> is set to true, the release package will ignore <code>androidAop.fastDex = true</code> Settings<br> 3、If there are other plugins using <code>toTransform</code> in your project, please adjust the task execution order and put the <code>xxAssembleAndroidAopTask</code> task at the end, otherwise the effect will be discounted.<br> 4、If your project has other plugins that use <code>toTransform</code>, such as some Routers, it is recommended to use this method.</p> </div> <h4 id=method-2-debugmode><img alt=📌 class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f4cc.svg title=:pushpin:> Method 2 (debugMode)<a class=headerlink href=#method-2-debugmode title="Permanent link">&para;</a></h4> <p style=color:red;>If you configure DebugMode in this step, please read the instructions in each line below carefully and do not copy them blindly, especially if you want to cut third-party jar packages.</p> <p style=color:#FF8C00;>The following configuration steps also apply to componentized scenarios <a href=https://flyjingfish.github.io/AndroidAOP/FAQ/#14-different-modules-of-componentized-projects-use-products-such-as-aar-for-compilation-how-to-speed-up-the-packaging-speed>Click here to view</a> </p> <p><img src=/AndroidAOP/svg/one.svg#only-light align=center> <img src=/AndroidAOP/svg/one_dark.svg#only-dark align=center> For <strong>all sub-modules</strong> also rely on plug-ins, please follow the above <a href=#1-introduce-the-plug-in-choose-one-of-the-two-methods-below-required>step 1 method 1 to configure the project</a>, then choose one of the following methods</p> <ul> <li> <p><strong>Method 1 (recommended):</strong></p> <p>Follow the above <a href=#1-introduce-the-plug-in-choose-one-of-the-two-methods-below-required>Step 1 Method 1 Configuration Project</a> and you are done. <strong>This method automatically applies debugMode to all Android modules (excluding <code>com.android.dynamic-feature</code> modules)</strong></p> </li> <li> <p><strong>Method 2:</strong></p> <p>Please configure the project according to the above <a href=#1-introduce-the-plug-in-choose-one-of-the-two-methods-below-required>Step 1 Method 1 to configure the project</a>, and then manually set the required sub-module module, for example:</p> <div class="tabbed-set tabbed-alternate" data-tabs=7:2><input checked=checked id=method-2-debugmode-groovy name=__tabbed_7 type=radio><input id=method-2-debugmode-kotlin name=__tabbed_7 type=radio><div class=tabbed-labels><label for=method-2-debugmode-groovy>Groovy</label><label for=method-2-debugmode-kotlin>Kotlin</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-groovy highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=n>plugins</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=w>     </span><span class=o>...</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=w>     </span><span class=n>id</span><span class=w> </span><span class=s1>&#39;android.aop&#39;</span><span class=c1>//It is best to put it on the last line</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=o>}</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=n>plugins</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=w>     </span><span class=p>...</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=w>     </span><span class=n>id</span><span class=p>(</span><span class=s>&quot;android.aop&quot;</span><span class=p>)</span><span class=c1>//It is best to put it on the last line</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=p>}</span>
</span></code></pre></div> </div> </div> </div> </li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <ol> <li>This method can only apply debugMode to the modules you have added, and the related aspects in the modules that have not been added will not take effect <br></li> <li>If your module is a Java or Kotlin library, the automatic mode can only enable all Android libraries. You need to use manual mode to configure your module separately for it to take effect. <code>com.android.dynamic-feature</code> needs to be manually added to this plugin.</li> </ol> </div> <p><img src=/AndroidAOP/svg/two.svg#only-light align=center> <img src=/AndroidAOP/svg/two_dark.svg#only-dark align=center> Add the following settings in <code>gradle.properties</code> in the <strong>root directory</strong></p> <div class="language-properties highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=na>androidAop.debugMode</span><span class=o>=</span><span class=s>true //Set to true to use the current packaging method of your project, false to use the full packaging method, otherwise the default is false</span>
</span></code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>1、<img alt=⚠ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg title=:warning:><img alt=⚠ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg title=:warning:><img alt=⚠ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg title=:warning:> Please note that when set to true, the compilation speed will be faster but some functions will be invalid. Only the aop code will be woven into the set module. The third-party jar package will not weave in the code, so please be careful to turn it off when building the official package. Configure this and clean the project <br> 2、If <code>org.gradle.parallel = true</code> is set, please pay attention to adjust the order of each module <strong>compileXXJavaWithJavac</strong> task if there is a bug. If not, you can choose to turn off this configuration directly.</p> </div> <p><img src=/AndroidAOP/svg/three.svg#only-light align=center> <img src=/AndroidAOP/svg/three_dark.svg#only-dark align=center> Add the following settings in <code>gradle.properties</code> in the <strong>root directory</strong></p> <div class="language-properties highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=na>androidAop.debugMode.variantOnlyDebug</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>true //If this is not written by default, it is true</span>
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>1.If this option is not set, it will be true by default. Please note that when it is set to true, the release package will ignore the setting of <code>androidAop.debugMode = true</code> and automatically use the full packaging method. When it is set to false, there will be no such effect <br> 2.This feature is enabled by default, so the release package does not need to manually disable <code>androidAop.debugMode</code> <br> <strong>3. This feature is only valid for Android libraries, not for Java or Kotlin libraries</strong></p> </div> <p><img src=/AndroidAOP/svg/four.svg#only-light align=center> <img src=/AndroidAOP/svg/four_dark.svg#only-dark align=center> Add the following settings to <code>gradle.properties</code> in the <strong>root directory</strong> (optional)</p> <div class="language-properties highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=na>androidAop.debugMode.buildConfig</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>true //If set to true, it means exporting a DebugModeBuildConfig.java file. If not set, the default value is true.</span>
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>1、Because some modules have only Kotlin code, debugMode cannot take effect. You can insert a Java code to make it effective by setting it to true. If you don't need it, you can set it to false, but you need to manually create a Java code.<br> 2、If debugMode does not work, consider turning this off by adding the setting <code>android.defaults.buildfeatures.buildconfig=true</code></p> </div> <h4 id=other-configurations-optional-you-can-configure-this-if-you-want-to-be-the-best><img alt=📌 class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f4cc.svg title=:pushpin:> Other configurations (optional, you can configure this if you want to be the best)<a class=headerlink href=#other-configurations-optional-you-can-configure-this-if-you-want-to-be-the-best title="Permanent link">&para;</a></h4> <p>Add the following settings to <code>gradle.properties</code> in the <strong>root directory</strong> </p> <div class="language-properties highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=na>androidAop.reflectInvokeMethod</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>true //Set to true to reflect the execution of the facet method, if not set, the default is false</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=na>androidAop.reflectInvokeMethod.variantOnlyDebug</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>true //Set to true to be effective only in debug, if not set, the default is false</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=na>androidAop.reflectInvokeMethod.static</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>true // Set to true to simulate non-reflective situations. If not set, the default value is true.</span>
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <ol> <li><code>androidAop.reflectInvokeMethod</code> is set to true to reflect the execution of the section method, which will speed up the packaging speed. If it is set to false, the secondary compilation speed is basically the same as the reflection speed. <br></li> <li>Please note that when <code>androidAop.reflectInvokeMethod.variantOnlyDebug</code> is set to true, the release package will ignore the setting of <code>androidAop.reflectInvokeMethod = true</code> and automatically not reflect. If it is set to false, there will be no such effect (default false if not written) <br></li> <li><code>androidAop.reflectInvokeMethod.static</code> is set to true to simulate the non-reflective situation and take into account the compilation speed of reflection. If it is not written, the default is true. If you want to use reflection, it is recommended to set this to true. Set it to false for pure reflection <br></li> <li><strong><code>androidAop.reflectInvokeMethod.variantOnlyDebug</code> is only valid for Android libraries, not for Java or Kotlin libraries</strong></li> </ol> </div> <h4 id=cleankeepaopcache><img alt=📌 class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f4cc.svg title=:pushpin:> CleanKeepAopCache<a class=headerlink href=#cleankeepaopcache title="Permanent link">&para;</a></h4> <p>When you want to clean the project, you can use this command to reduce the compilation time after cleaning</p> <ul> <li> <p>Use in the command line</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>./gradlew aaaCleanKeepAopCache
</span></code></pre></div> </li> <li> <p>Double-click the command</p> <p><img src=../screenshot/cleanKeepAopCache.png alt=show width=300px></p> </li> </ul> <p>If you can't find the <code>aaaCleanKeepAopCache</code> command, you need to add the following settings to the <code>build.gradle</code> in the <strong>root directory</strong></p> <div class="tabbed-set tabbed-alternate" data-tabs=8:2><input checked=checked id=cleankeepaopcache-groovy name=__tabbed_8 type=radio><input id=cleankeepaopcache-kotlin name=__tabbed_8 type=radio><div class=tabbed-labels><label for=cleankeepaopcache-groovy>Groovy</label><label for=cleankeepaopcache-kotlin>Kotlin</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-groovy highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=n>apply</span><span class=w> </span><span class=nl>plugin:</span><span class=w> </span><span class=s1>&#39;android.aop.clean&#39;</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=n>apply</span><span class=p>(</span><span class=n>plugin</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;android.aop.clean&quot;</span><span class=p>)</span>
</span></code></pre></div> </div> </div> </div> <h3 id=this-library-has-some-built-in-functional-annotations-for-you-to-use-directly>This library has some built-in functional annotations for you to use directly.<a class=headerlink href=#this-library-has-some-built-in-functional-annotations-for-you-to-use-directly title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Annotation name</th> <th style="text-align: center;">Parameter description</th> <th style="text-align: center;">Function description</th> </tr> </thead> <tbody> <tr> <td>@SingleClick</td> <td style="text-align: center;">value = interval of quick clicks, default 1000ms</td> <td style="text-align: center;">Click the annotation and add this annotation to make your method accessible only when clicked</td> </tr> <tr> <td>@DoubleClick</td> <td style="text-align: center;">value = maximum time between two clicks, default 300ms</td> <td style="text-align: center;">Double-click annotation, add this annotation to make your method enterable only when double-clicked</td> </tr> <tr> <td>@IOThread</td> <td style="text-align: center;">ThreadType = thread type</td> <td style="text-align: center;">Switch to the sub-thread operation. Adding this annotation can switch the code in your method to the sub-thread for execution</td> </tr> <tr> <td>@MainThread</td> <td style="text-align: center;">No parameters</td> <td style="text-align: center;">The operation of switching to the main thread. Adding this annotation can switch the code in your method to the main thread for execution</td> </tr> <tr> <td>@OnLifecycle<sup>*</sup></td> <td style="text-align: center;">value = Lifecycle.Event</td> <td style="text-align: center;">Monitor life cycle operations. Adding this annotation allows the code in your method to be executed only during the corresponding life cycle</td> </tr> <tr> <td>@TryCatch</td> <td style="text-align: center;">value = a flag you customized</td> <td style="text-align: center;">Adding this annotation can wrap a layer of try catch code for your method</td> </tr> <tr> <td>@Permission<sup>*</sup></td> <td style="text-align: center;">value = String array of permissions</td> <td style="text-align: center;">The operation of applying for permissions. Adding this annotation will enable your code to be executed only after obtaining permissions</td> </tr> <tr> <td>@Scheduled</td> <td style="text-align: center;">initialDelay = delayed start time<br>interval = interval<br>repeatCount = number of repetitions<br>isOnMainThread = whether to be the main thread<br>id = unique identifier</td> <td style="text-align: center;">Scheduled tasks, add this annotation to make your method Executed every once in a while, call AndroidAop.shutdownNow(id) or AndroidAop.shutdown(id) to stop</td> </tr> <tr> <td>@Delay</td> <td style="text-align: center;">delay = delay time<br>isOnMainThread = whether the main thread<br>id = unique identifier</td> <td style="text-align: center;">Delay task, add this annotation to delay the execution of your method for a period of time, call AndroidAop.shutdownNow(id) or AndroidAop .shutdown(id) can be canceled</td> </tr> <tr> <td>@CheckNetwork</td> <td style="text-align: center;">tag = custom tag<br>toastText = toast prompt when there is no network<br>invokeListener = whether to take over the check network logic</td> <td style="text-align: center;">Check whether the network is available, adding this annotation will allow your method to enter only when there is a network</td> </tr> <tr> <td>@CustomIntercept</td> <td style="text-align: center;">value = a flag of a string array that you customized</td> <td style="text-align: center;">Custom interception, used with AndroidAop.setOnCustomInterceptListener, is a panacea</td> </tr> </tbody> </table> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The above functions are located in the <code>android-aop-extra</code> library. <a href=/AndroidAOP/android_aop_extra/ >For detailed instructions, please see the documentation</a></p> </div> <h2 id=custom-aspects><abbr title="Using the following features means you must choose one of <code>android-aop-ksp</code> and <code>android-aop-processor</code> as a dependency">Custom Aspects</abbr><a class=headerlink href=#custom-aspects title="Permanent link">&para;</a></h2> <p>This introduction is a general outline.</p> <ul> <li>@AndroidAopPointCut is an aspect that annotates methods</li> <li>@AndroidAopMatchClassMethod is the aspect of matching class methods</li> <li>@AndroidAopReplaceClass is called by the replacement method</li> <li>@AndroidAopModifyExtendsClass is a modified inherited class</li> <li>@AndroidAopCollectMethod Is a collection inheritance class</li> </ul> <h4 id=androidaoppointcut><strong>@AndroidAopPointCut</strong><a class=headerlink href=#androidaoppointcut title="Permanent link">&para;</a></h4> <p>&emsp;&emsp;It is used to make aspects in the form of annotations on the method. The above annotations are all made through this. <a href=https://flyjingfish.github.io/AndroidAOP/AndroidAopPointCut>Please see the wiki document for detailed usage</a></p> <p>&emsp;&emsp;The following uses @CustomIntercept as an example to introduce how to use it.</p> <ul> <li> <p>Create annotations(You need to implement the BasePointCut interface, and fill in the annotations above for its generic type)</p> <div class="tabbed-set tabbed-alternate" data-tabs=9:2><input checked=checked id=androidaoppointcut-kotlin name=__tabbed_9 type=radio><input id=androidaoppointcut-java name=__tabbed_9 type=radio><div class=tabbed-labels><label for=androidaoppointcut-kotlin>Kotlin</label><label for=androidaoppointcut-java>Java</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=nd>@AndroidAopPointCut</span><span class=p>(</span><span class=n>CustomInterceptCut</span><span class=o>::</span><span class=n>class</span><span class=p>)</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=nd>@Target</span><span class=p>(</span>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a><span class=w>    </span><span class=n>AnnotationTarget</span><span class=p>.</span><span class=na>FUNCTION</span><span class=p>,</span>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=w>    </span><span class=n>AnnotationTarget</span><span class=p>.</span><span class=na>PROPERTY_GETTER</span><span class=p>,</span>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a><span class=w>    </span><span class=n>AnnotationTarget</span><span class=p>.</span><span class=na>PROPERTY_SETTER</span>
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a><span class=p>)</span>
</span><span id=__span-26-7><a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a><span class=nd>@Retention</span><span class=p>(</span>
</span><span id=__span-26-8><a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a><span class=w>    </span><span class=n>AnnotationRetention</span><span class=p>.</span><span class=na>RUNTIME</span>
</span><span id=__span-26-9><a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a><span class=p>)</span>
</span><span id=__span-26-10><a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a><span class=kd>annotation</span><span class=w> </span><span class=kd>class</span><span class=w> </span><span class=nc>CustomIntercept</span><span class=p>(</span><span class=k>vararg</span><span class=w> </span><span class=kd>val</span><span class=w> </span><span class=nv>value</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[]</span><span class=p>)</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-java highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=nd>@AndroidAopPointCut</span><span class=p>(</span><span class=n>CustomInterceptCut</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=nd>@Target</span><span class=p>({</span><span class=n>ElementType</span><span class=p>.</span><span class=na>METHOD</span><span class=p>})</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=nd>@Retention</span><span class=p>(</span><span class=n>RetentionPolicy</span><span class=p>.</span><span class=na>RUNTIME</span><span class=p>)</span>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=kd>public</span><span class=w> </span><span class=nd>@interface</span><span class=w> </span><span class=n>CustomIntercept</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=w>    </span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=nf>value</span><span class=p>()</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=p>{};</span>
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=p>}</span>
</span></code></pre></div> </div> </div> </div> </li> <li> <p>Create a class that annotates the aspect (needs to implement the BasePointCut interface, and fill in the above annotation with its generic type)</p> <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=kd>class</span><span class=w> </span><span class=nc>CustomInterceptCut</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>BasePointCut</span><span class=o>&lt;</span><span class=n>CustomIntercept</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=w>     </span><span class=kd>override</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>invoke</span><span class=p>(</span>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=w>         </span><span class=n>joinPoint</span><span class=p>:</span><span class=w> </span><span class=n>ProceedJoinPoint</span><span class=p>,</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=w>         </span><span class=n>annotation</span><span class=p>:</span><span class=w> </span><span class=n>CustomIntercept</span><span class=w> </span><span class=c1>//annotation is the annotation you add to the method</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=w>     </span><span class=p>):</span><span class=w> </span><span class=kt>Any?</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a><span class=w>         </span><span class=c1>//Write your logic here</span>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=w>         </span><span class=c1>// joinPoint.proceed() means to continue executing the logic of the point-cut method. If this method is not called, the code in the point-cut method will not be executed.</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a><span class=w>         </span><span class=c1>// About ProceedJoinPoint, you can see the wiki document, click the link below for details</span>
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a><span class=w>         </span><span class=k>return</span><span class=w> </span><span class=n>joinPoint</span><span class=p>.</span><span class=na>proceed</span><span class=p>()</span>
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a><span class=w>     </span><span class=p>}</span>
</span><span id=__span-28-11><a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a><span class=p>}</span>
</span></code></pre></div> <p><a href=/AndroidAOP/ProceedJoinPoint>About ProceedJoinPoint usage instructions</a>, the same applies to ProceedJoinPoint below</p> </li> <li> <p>use</p> <p>Directly add the annotation you wrote to any method, for example, to onCustomIntercept(). When onCustomIntercept() is called, it will first enter the invoke method of CustomInterceptCut mentioned above.</p> <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=nd>@CustomIntercept</span><span class=p>(</span><span class=s>&quot;I am custom data&quot;</span><span class=p>)</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=kd>fun</span><span class=w> </span><span class=nf>onCustomIntercept</span><span class=p>(){</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a><span class=p>}</span>
</span></code></pre></div> </li> </ul> <h4 id=androidaopmatchclassmethod><strong>@AndroidAopMatchClassMethod</strong><a class=headerlink href=#androidaopmatchclassmethod title="Permanent link">&para;</a></h4> <p>&emsp;&emsp;It is used to match aspects of a certain class and its corresponding method.</p> <p>&emsp;&emsp;<strong>The matching method supports accurate matching, <a href=https://flyjingfish.github.io/AndroidAOP/AndroidAopMatchClassMethod>click here to see detailed usage documentation on the wiki</a></strong></p> <ul> <li> <p>Example 1</p> <div class="language-java highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=kn>package</span><span class=w> </span><span class=nn>com.flyjingfish.test_lib</span><span class=p>;</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>TestMatch</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=w>     </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>test1</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>value1</span><span class=p>,</span><span class=n>String</span><span class=w> </span><span class=n>value2</span><span class=p>){</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a><span class=w>     </span><span class=p>}</span>
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=w>     </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>test2</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>value1</span><span class=p>,</span><span class=n>String</span><span class=w> </span><span class=n>value2</span><span class=p>){</span>
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a><span class=w>         </span><span class=k>return</span><span class=w> </span><span class=n>value1</span><span class=o>+</span><span class=n>value2</span><span class=p>;</span>
</span><span id=__span-30-10><a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a><span class=w>     </span><span class=p>}</span>
</span><span id=__span-30-11><a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a><span class=p>}</span>
</span></code></pre></div> <p>If TestMatch is the class to be matched, and you want to match the test2 method, the following is how to write the match:</p> <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=k>package</span><span class=w> </span><span class=nn>com.flyjingfish.test_lib.mycut;</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=nd>@AndroidAopMatchClassMethod</span><span class=p>(</span>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=w>         </span><span class=n>targetClassName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;com.flyjingfish.test_lib.TestMatch&quot;</span><span class=p>,</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=w>         </span><span class=n>methodName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=s>&quot;test2&quot;</span><span class=o>]</span><span class=p>,</span>
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a><span class=w>         </span><span class=n>type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MatchType</span><span class=p>.</span><span class=na>SELF</span>
</span><span id=__span-31-7><a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a><span class=p>)</span>
</span><span id=__span-31-8><a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a><span class=kd>class</span><span class=w> </span><span class=nc>MatchTestMatchMethod</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>MatchClassMethod</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-31-9><a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a><span class=w>   </span><span class=kd>override</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>invoke</span><span class=p>(</span><span class=n>joinPoint</span><span class=p>:</span><span class=w> </span><span class=n>ProceedJoinPoint</span><span class=p>,</span><span class=w> </span><span class=n>methodName</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>):</span><span class=w> </span><span class=kt>Any?</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-31-10><a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a><span class=w>     </span><span class=n>Log</span><span class=p>.</span><span class=na>e</span><span class=p>(</span><span class=s>&quot;MatchTestMatchMethod&quot;</span><span class=p>,</span><span class=s>&quot;======&quot;</span><span class=o>+</span><span class=n>methodName</span><span class=o>+</span><span class=s>&quot;,getParameterTypes=&quot;</span><span class=o>+</span><span class=n>joinPoint</span><span class=p>.</span><span class=na>getTargetMethod</span><span class=p>().</span><span class=na>getParameterTypes</span><span class=p>().</span><span class=na>length</span><span class=p>);</span>
</span><span id=__span-31-11><a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a><span class=w>     </span><span class=c1>//Write your logic here</span>
</span><span id=__span-31-12><a id=__codelineno-31-12 name=__codelineno-31-12 href=#__codelineno-31-12></a><span class=w>     </span><span class=c1>//If you don’t want to execute the original method logic, 👇 don’t call the following sentence</span>
</span><span id=__span-31-13><a id=__codelineno-31-13 name=__codelineno-31-13 href=#__codelineno-31-13></a><span class=w>     </span><span class=k>return</span><span class=w> </span><span class=n>joinPoint</span><span class=p>.</span><span class=na>proceed</span><span class=p>()</span>
</span><span id=__span-31-14><a id=__codelineno-31-14 name=__codelineno-31-14 href=#__codelineno-31-14></a><span class=w>   </span><span class=p>}</span>
</span><span id=__span-31-15><a id=__codelineno-31-15 name=__codelineno-31-15 href=#__codelineno-31-15></a><span class=p>}</span>
</span></code></pre></div> <p>You can see that the type set by AndroidAopMatchClassMethod above is MatchType.SELF, which means that it only matches the TestMatch class itself, regardless of its subclasses. - Example 2</p> <p>If you want to Hook all onClicks of android.view.View.OnClickListener, to put it bluntly, you want to globally monitor all click events of OnClickListener. The code is as follows:</p> <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=nd>@AndroidAopMatchClassMethod</span><span class=p>(</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=w>     </span><span class=n>targetClassName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;android.view.View.OnClickListener&quot;</span><span class=p>,</span>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=w>     </span><span class=n>methodName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=s>&quot;onClick&quot;</span><span class=o>]</span><span class=p>,</span>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class=w>     </span><span class=n>type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MatchType</span><span class=p>.</span><span class=na>EXTENDS</span><span class=w> </span><span class=c1>//type must be EXTENDS because you want to hook all classes that inherit OnClickListener</span>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=p>)</span>
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a><span class=kd>class</span><span class=w> </span><span class=nc>MatchOnClick</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>MatchClassMethod</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a><span class=c1>// @SingleClick(5000) //Combined with @SingleClick, add multi-point prevention to all clicks, 6 is not 6</span>
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class=w>     </span><span class=kd>override</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>invoke</span><span class=p>(</span><span class=n>joinPoint</span><span class=p>:</span><span class=w> </span><span class=n>ProceedJoinPoint</span><span class=p>,</span><span class=w> </span><span class=n>methodName</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>):</span><span class=w> </span><span class=kt>Any?</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a><span class=w>         </span><span class=n>Log</span><span class=p>.</span><span class=na>e</span><span class=p>(</span><span class=s>&quot;MatchOnClick&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;======invoke=====</span><span class=si>$</span><span class=n>methodName</span><span class=s>&quot;</span><span class=p>)</span>
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a><span class=w>         </span><span class=k>return</span><span class=w> </span><span class=n>joinPoint</span><span class=p>.</span><span class=na>proceed</span><span class=p>()</span>
</span><span id=__span-32-11><a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a><span class=w>     </span><span class=p>}</span>
</span><span id=__span-32-12><a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a><span class=p>}</span>
</span></code></pre></div> <p>You can see that the type set by AndroidAopMatchClassMethod above is MatchType.EXTENDS, which means matching all subclasses inherited from OnClickListener. For more inheritance methods, <a href=https://flyjingfish.github.io/AndroidAOP/AndroidAopMatchClassMethod/#brief-description>please refer to the Wiki document</a></p> <p><strong><img alt=⚠ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg title=:warning:>Note: If the subclass does not have this method, the aspect will be invalid. In addition, do not match the same method multiple times in the same class, otherwise only one will take effect, Use overrideMethod to ignore this restriction <a href=https://flyjingfish.github.io/AndroidAOP/AndroidAopMatchClassMethod>Click here for details</a></strong></p> </li> </ul> <h4 id=androidaopreplaceclass><strong>@AndroidAopReplaceClass</strong><a class=headerlink href=#androidaopreplaceclass title="Permanent link">&para;</a></h4> <p>&emsp;&emsp;It is used for replacement method calls</p> <p>&emsp;&emsp;@AndroidAopReplaceClass and @AndroidAopReplaceMethod are used together</p> <p>&emsp;&emsp;<strong>Detailed usage of replacement method call, <a href=https://flyjingfish.github.io/AndroidAOP/AndroidAopReplaceClass>click here to see detailed usage documentation in wiki</a></strong></p> <ul> <li>Java writing method <div class="language-java highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=nd>@AndroidAopReplaceClass</span><span class=p>(</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=w>         </span><span class=s>&quot;android.widget.Toast&quot;</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=p>)</span>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ReplaceToast</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a><span class=w>    </span><span class=nd>@AndroidAopReplaceMethod</span><span class=p>(</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a><span class=w>            </span><span class=s>&quot;android.widget.Toast makeText(android.content.Context, java.lang.CharSequence, int)&quot;</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a><span class=w>    </span><span class=p>)</span>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a><span class=w>    </span><span class=c1>//  Because the replaced method is static, the parameter type and order correspond to the replaced method one-to-one.</span>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>Toast</span><span class=w> </span><span class=nf>makeText</span><span class=p>(</span><span class=n>Context</span><span class=w> </span><span class=n>context</span><span class=p>,</span><span class=w> </span><span class=n>CharSequence</span><span class=w> </span><span class=n>text</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>duration</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>Toast</span><span class=p>.</span><span class=na>makeText</span><span class=p>(</span><span class=n>context</span><span class=p>,</span><span class=w> </span><span class=s>&quot;ReplaceToast-&quot;</span><span class=o>+</span><span class=n>text</span><span class=p>,</span><span class=w> </span><span class=n>duration</span><span class=p>);</span>
</span><span id=__span-33-11><a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-33-12><a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a><span class=w>    </span><span class=nd>@AndroidAopReplaceMethod</span><span class=p>(</span>
</span><span id=__span-33-13><a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a><span class=w>            </span><span class=s>&quot;void setGravity(int , int , int )&quot;</span>
</span><span id=__span-33-14><a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a><span class=w>    </span><span class=p>)</span>
</span><span id=__span-33-15><a id=__codelineno-33-15 name=__codelineno-33-15 href=#__codelineno-33-15></a><span class=w>    </span><span class=c1>//  Because the replaced method is not a static method, the first parameter is the replaced class, and the subsequent parameters correspond to the replaced method one-to-one.</span>
</span><span id=__span-33-16><a id=__codelineno-33-16 name=__codelineno-33-16 href=#__codelineno-33-16></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>setGravity</span><span class=p>(</span><span class=n>Toast</span><span class=w> </span><span class=n>toast</span><span class=p>,</span><span class=kt>int</span><span class=w> </span><span class=n>gravity</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>xOffset</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>yOffset</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-33-17><a id=__codelineno-33-17 name=__codelineno-33-17 href=#__codelineno-33-17></a><span class=w>        </span><span class=n>toast</span><span class=p>.</span><span class=na>setGravity</span><span class=p>(</span><span class=n>Gravity</span><span class=p>.</span><span class=na>CENTER</span><span class=p>,</span><span class=w> </span><span class=n>xOffset</span><span class=p>,</span><span class=w> </span><span class=n>yOffset</span><span class=p>);</span>
</span><span id=__span-33-18><a id=__codelineno-33-18 name=__codelineno-33-18 href=#__codelineno-33-18></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-33-19><a id=__codelineno-33-19 name=__codelineno-33-19 href=#__codelineno-33-19></a><span class=w>    </span><span class=nd>@AndroidAopReplaceMethod</span><span class=p>(</span>
</span><span id=__span-33-20><a id=__codelineno-33-20 name=__codelineno-33-20 href=#__codelineno-33-20></a><span class=w>            </span><span class=s>&quot;void show()&quot;</span>
</span><span id=__span-33-21><a id=__codelineno-33-21 name=__codelineno-33-21 href=#__codelineno-33-21></a><span class=w>    </span><span class=p>)</span>
</span><span id=__span-33-22><a id=__codelineno-33-22 name=__codelineno-33-22 href=#__codelineno-33-22></a><span class=w>    </span><span class=c1>//  Although the replaced method has no parameters, because it is not a static method, the first parameter is still the replaced class.</span>
</span><span id=__span-33-23><a id=__codelineno-33-23 name=__codelineno-33-23 href=#__codelineno-33-23></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>show</span><span class=p>(</span><span class=n>Toast</span><span class=w> </span><span class=n>toast</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-33-24><a id=__codelineno-33-24 name=__codelineno-33-24 href=#__codelineno-33-24></a><span class=w>        </span><span class=n>toast</span><span class=p>.</span><span class=na>show</span><span class=p>();</span>
</span><span id=__span-33-25><a id=__codelineno-33-25 name=__codelineno-33-25 href=#__codelineno-33-25></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-33-26><a id=__codelineno-33-26 name=__codelineno-33-26 href=#__codelineno-33-26></a><span class=p>}</span>
</span></code></pre></div></li> <li>Kotlin writing method <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=nd>@AndroidAopReplaceClass</span><span class=p>(</span><span class=s>&quot;android.util.Log&quot;</span><span class=p>)</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=kd>object</span><span class=w> </span><span class=nc>ReplaceLog</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=w>    </span><span class=nd>@AndroidAopReplaceMethod</span><span class=p>(</span><span class=s>&quot;int e(java.lang.String,java.lang.String)&quot;</span><span class=p>)</span>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a><span class=w>    </span><span class=nd>@JvmStatic</span>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a><span class=w>    </span><span class=kd>fun</span><span class=w> </span><span class=nf>e</span><span class=p>(</span><span class=w> </span><span class=n>tag</span><span class=p>:</span><span class=kt>String</span><span class=p>,</span><span class=w> </span><span class=n>msg</span><span class=p>:</span><span class=kt>String</span><span class=p>)</span><span class=w> </span><span class=p>:</span><span class=kt>Int</span><span class=p>{</span>
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>Log</span><span class=p>.</span><span class=na>e</span><span class=p>(</span><span class=n>tag</span><span class=p>,</span><span class=w> </span><span class=s>&quot;ReplaceLog-</span><span class=si>$</span><span class=n>msg</span><span class=s>&quot;</span><span class=p>)</span>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a><span class=p>}</span>
</span></code></pre></div></li> </ul> <h4 id=androidaopmodifyextendsclass><strong>@AndroidAopModifyExtendsClass</strong><a class=headerlink href=#androidaopmodifyextendsclass title="Permanent link">&para;</a></h4> <p>&emsp;&emsp;It is an inherited class that modifies the target class<a href=https://flyjingfish.github.io/AndroidAOP/AndroidAopModifyExtendsClass>Detailed usage</a></p> <p>&emsp;&emsp;Usually, you replace one layer in the inheritance relationship of a certain class, then rewrite some functions, and add some logic code you want to the rewritten functions to monitor and rewrite the original logic.</p> <p>&emsp;&emsp;As shown in the following example, you need to replace the inherited class of <code>AppCompatImageView</code> with <code>ReplaceImageView</code></p> <ul> <li> <p>Application scenario: non-invasively implement the function of monitoring large image loading</p> <div class="language-java highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=nd>@AndroidAopModifyExtendsClass</span><span class=p>(</span><span class=s>&quot;androidx.appcompat.widget.AppCompatImageView&quot;</span><span class=p>)</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ReplaceImageView</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>ImageView</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>ReplaceImageView</span><span class=p>(</span><span class=nd>@NonNull</span><span class=w> </span><span class=n>Context</span><span class=w> </span><span class=n>context</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=w>        </span><span class=kd>super</span><span class=p>(</span><span class=n>context</span><span class=p>);</span>
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>ReplaceImageView</span><span class=p>(</span><span class=nd>@NonNull</span><span class=w> </span><span class=n>Context</span><span class=w> </span><span class=n>context</span><span class=p>,</span><span class=w> </span><span class=nd>@Nullable</span><span class=w> </span><span class=n>AttributeSet</span><span class=w> </span><span class=n>attrs</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a><span class=w>        </span><span class=kd>super</span><span class=p>(</span><span class=n>context</span><span class=p>,</span><span class=w> </span><span class=n>attrs</span><span class=p>);</span>
</span><span id=__span-35-8><a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-35-9><a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a>
</span><span id=__span-35-10><a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>ReplaceImageView</span><span class=p>(</span><span class=nd>@NonNull</span><span class=w> </span><span class=n>Context</span><span class=w> </span><span class=n>context</span><span class=p>,</span><span class=w> </span><span class=nd>@Nullable</span><span class=w> </span><span class=n>AttributeSet</span><span class=w> </span><span class=n>attrs</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>defStyleAttr</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-35-11><a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a><span class=w>        </span><span class=kd>super</span><span class=p>(</span><span class=n>context</span><span class=p>,</span><span class=w> </span><span class=n>attrs</span><span class=p>,</span><span class=w> </span><span class=n>defStyleAttr</span><span class=p>);</span>
</span><span id=__span-35-12><a id=__codelineno-35-12 name=__codelineno-35-12 href=#__codelineno-35-12></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-35-13><a id=__codelineno-35-13 name=__codelineno-35-13 href=#__codelineno-35-13></a>
</span><span id=__span-35-14><a id=__codelineno-35-14 name=__codelineno-35-14 href=#__codelineno-35-14></a><span class=w>    </span><span class=nd>@Override</span>
</span><span id=__span-35-15><a id=__codelineno-35-15 name=__codelineno-35-15 href=#__codelineno-35-15></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>setImageDrawable</span><span class=p>(</span><span class=nd>@Nullable</span><span class=w> </span><span class=n>Drawable</span><span class=w> </span><span class=n>drawable</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-35-16><a id=__codelineno-35-16 name=__codelineno-35-16 href=#__codelineno-35-16></a><span class=w>        </span><span class=kd>super</span><span class=p>.</span><span class=na>setImageDrawable</span><span class=p>(</span><span class=n>drawable</span><span class=p>);</span>
</span><span id=__span-35-17><a id=__codelineno-35-17 name=__codelineno-35-17 href=#__codelineno-35-17></a><span class=w>        </span><span class=c1>//做一些监测或者再次修改</span>
</span><span id=__span-35-18><a id=__codelineno-35-18 name=__codelineno-35-18 href=#__codelineno-35-18></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-35-19><a id=__codelineno-35-19 name=__codelineno-35-19 href=#__codelineno-35-19></a><span class=p>}</span>
</span></code></pre></div> </li> </ul> <h4 id=androidaopcollectmethod><strong>@AndroidAopCollectMethod</strong><a class=headerlink href=#androidaopcollectmethod title="Permanent link">&para;</a></h4> <p>&emsp;&emsp;It is a aspects that collects inherited classes of a class <a href=https://flyjingfish.github.io/AndroidAOP/AndroidAopCollectMethod>detailed usage</a></p> <p>&emsp;&emsp;It is extremely simple to use, the sample code has already explained</p> <ul> <li> <p>Example</p> <div class="tabbed-set tabbed-alternate" data-tabs=10:2><input checked=checked id=androidaopcollectmethod-kotlin name=__tabbed_10 type=radio><input id=androidaopcollectmethod-java name=__tabbed_10 type=radio><div class=tabbed-labels><label for=androidaopcollectmethod-kotlin>Kotlin</label><label for=androidaopcollectmethod-java>Java</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-kotlin highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=kd>object</span><span class=w> </span><span class=nc>InitCollect</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>val</span><span class=w> </span><span class=nv>collects</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mutableListOf</span><span class=o>&lt;</span><span class=n>SubApplication</span><span class=o>&gt;</span><span class=p>()</span>
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>val</span><span class=w> </span><span class=nv>collectClazz</span><span class=p>:</span><span class=w> </span><span class=n>MutableList</span><span class=o>&lt;</span><span class=n>Class</span><span class=o>&lt;</span><span class=k>out</span><span class=w> </span><span class=n>SubApplication</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mutableListOf</span><span class=p>()</span>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=w>    </span><span class=nd>@AndroidAopCollectMethod</span>
</span><span id=__span-36-6><a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=w>    </span><span class=nd>@JvmStatic</span>
</span><span id=__span-36-7><a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a><span class=w>    </span><span class=kd>fun</span><span class=w> </span><span class=nf>collect</span><span class=p>(</span><span class=n>sub</span><span class=p>:</span><span class=w> </span><span class=n>SubApplication</span><span class=p>){</span>
</span><span id=__span-36-8><a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a><span class=w>      </span><span class=n>collects</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>sub</span><span class=p>)</span>
</span><span id=__span-36-9><a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-36-10><a id=__codelineno-36-10 name=__codelineno-36-10 href=#__codelineno-36-10></a><span class=w>    </span><span class=nd>@AndroidAopCollectMethod</span>
</span><span id=__span-36-11><a id=__codelineno-36-11 name=__codelineno-36-11 href=#__codelineno-36-11></a><span class=w>    </span><span class=nd>@JvmStatic</span>
</span><span id=__span-36-12><a id=__codelineno-36-12 name=__codelineno-36-12 href=#__codelineno-36-12></a><span class=w>    </span><span class=kd>fun</span><span class=w> </span><span class=nf>collect2</span><span class=p>(</span><span class=n>sub</span><span class=p>:</span><span class=n>Class</span><span class=o>&lt;</span><span class=k>out</span><span class=w> </span><span class=n>SubApplication</span><span class=o>&gt;</span><span class=p>){</span>
</span><span id=__span-36-13><a id=__codelineno-36-13 name=__codelineno-36-13 href=#__codelineno-36-13></a><span class=w>      </span><span class=n>collectClazz</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>sub</span><span class=p>)</span>
</span><span id=__span-36-14><a id=__codelineno-36-14 name=__codelineno-36-14 href=#__codelineno-36-14></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-36-15><a id=__codelineno-36-15 name=__codelineno-36-15 href=#__codelineno-36-15></a><span class=w>    </span><span class=c1>// Call this method directly. The collects collection contains data.</span>
</span><span id=__span-36-16><a id=__codelineno-36-16 name=__codelineno-36-16 href=#__codelineno-36-16></a><span class=w>    </span><span class=kd>fun</span><span class=w> </span><span class=nf>init</span><span class=p>(</span><span class=n>application</span><span class=p>:</span><span class=w> </span><span class=n>Application</span><span class=p>){</span>
</span><span id=__span-36-17><a id=__codelineno-36-17 name=__codelineno-36-17 href=#__codelineno-36-17></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>collect</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>collects</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-36-18><a id=__codelineno-36-18 name=__codelineno-36-18 href=#__codelineno-36-18></a><span class=w>            </span><span class=n>collect</span><span class=p>.</span><span class=na>onCreate</span><span class=p>(</span><span class=n>application</span><span class=p>)</span>
</span><span id=__span-36-19><a id=__codelineno-36-19 name=__codelineno-36-19 href=#__codelineno-36-19></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-36-20><a id=__codelineno-36-20 name=__codelineno-36-20 href=#__codelineno-36-20></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-36-21><a id=__codelineno-36-21 name=__codelineno-36-21 href=#__codelineno-36-21></a><span class=p>}</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-java highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>InitCollect2</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>SubApplication2</span><span class=o>&gt;</span><span class=w> </span><span class=n>collects</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;&gt;</span><span class=p>();</span>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Class</span><span class=o>&lt;?</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>SubApplication2</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>collectClazz</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;&gt;</span><span class=p>();</span>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=w>    </span><span class=nd>@AndroidAopCollectMethod</span>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>collect</span><span class=p>(</span><span class=n>SubApplication2</span><span class=w> </span><span class=n>sub</span><span class=p>){</span>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a><span class=w>        </span><span class=n>collects</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>sub</span><span class=p>);</span>
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a>
</span><span id=__span-37-10><a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a><span class=w>    </span><span class=nd>@AndroidAopCollectMethod</span>
</span><span id=__span-37-11><a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>collect3</span><span class=p>(</span><span class=n>Class</span><span class=o>&lt;?</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>SubApplication2</span><span class=o>&gt;</span><span class=w> </span><span class=n>sub</span><span class=p>){</span>
</span><span id=__span-37-12><a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a><span class=w>        </span><span class=n>collectClazz</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>sub</span><span class=p>);</span>
</span><span id=__span-37-13><a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-37-14><a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a><span class=w>    </span><span class=c1>// Call this method directly. The collects collection contains data.</span>
</span><span id=__span-37-15><a id=__codelineno-37-15 name=__codelineno-37-15 href=#__codelineno-37-15></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>init</span><span class=p>(</span><span class=n>Application</span><span class=w> </span><span class=n>application</span><span class=p>){</span>
</span><span id=__span-37-16><a id=__codelineno-37-16 name=__codelineno-37-16 href=#__codelineno-37-16></a><span class=w>        </span><span class=n>Log</span><span class=p>.</span><span class=na>e</span><span class=p>(</span><span class=s>&quot;InitCollect2&quot;</span><span class=p>,</span><span class=s>&quot;----init----&quot;</span><span class=p>);</span>
</span><span id=__span-37-17><a id=__codelineno-37-17 name=__codelineno-37-17 href=#__codelineno-37-17></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>SubApplication2</span><span class=w> </span><span class=n>collect</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>collects</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-18><a id=__codelineno-37-18 name=__codelineno-37-18 href=#__codelineno-37-18></a><span class=w>            </span><span class=n>collect</span><span class=p>.</span><span class=na>onCreate</span><span class=p>(</span><span class=n>application</span><span class=p>);</span>
</span><span id=__span-37-19><a id=__codelineno-37-19 name=__codelineno-37-19 href=#__codelineno-37-19></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-37-20><a id=__codelineno-37-20 name=__codelineno-37-20 href=#__codelineno-37-20></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-37-21><a id=__codelineno-37-21 name=__codelineno-37-21 href=#__codelineno-37-21></a><span class=p>}</span>
</span></code></pre></div> </div> </div> </div> </li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=.. class="md-footer__link md-footer__link--prev" aria-label="Previous: Overview"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Overview </div> </div> </a> <a href=../android_aop_extra/ class="md-footer__link md-footer__link--next" aria-label="Next: Extension Library"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Extension Library </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2023-2025 FlyJingFish </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/FlyJingFish target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href="https://qm.qq.com/cgi-bin/qm/qr?k=w2qDbv_5bpLl0lO0qjXxijl3JHCQgtXx&jump_from=webapi&authKey=Q6/YB+7q9BvOGbYv1qXZGAZLigsfwaBxDC8kz03/5Pwy7018XunUcHoC11kVLqCb" target=_blank rel=noopener title=qm.qq.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M434.1 420.4c-11.5 1.4-44.9-52.7-44.9-52.7 0 31.3-16.1 72.2-51 101.8 16.8 5.2 54.8 19.2 45.8 34.4-7.3 12.3-125.5 7.9-159.6 4-34.1 3.8-152.3 8.3-159.6-4-9-15.2 28.9-29.2 45.8-34.4-34.9-29.5-51.1-70.4-51.1-101.8 0 0-33.3 54.1-44.9 52.7-5.4-.6-12.4-29.6 9.3-99.7 10.3-33 22-60.5 40.1-105.8C60.9 98 109.2-.1 224.3-.1 338-.1 387.5 96 384.6 214.9c18.1 45.2 29.9 72.9 40.1 105.8 21.8 70.1 14.7 99.1 9.3 99.7z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.92b07e13.min.js></script> <script src=../js/language-switch.js></script> <script src=../js/header-button.js></script> <script src=../js/logo_anim.js></script> </body> </html>